name: Reusable workflow test

on:
  workflow_call:
    inputs:
      SERVICE_NAME:
        required: true
        type: string
    secrets: 
      DEMO:
        required: true
      GH_TOKEN:
        required: false

jobs:
  baker:
    name: Pass input to my-action
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      uses: actions/checkout@v2
    - name: Build with logs
      run: |
        mkdir ${{ runner.temp }}/build_logs
        echo ${{ strategy.job-index }}
        # ./build.sh --log-path ${{ runner.temp }}/build_logs
    - name: echo
      run: |
        echo "SERVICE_NAME: ${{ inputs.SERVICE_NAME }}"
    - run: |
        echo "job id is: ${{ github.job }}"
        echo "${{ github.run_id }}"
        echo "error someding"
    # - name: Upload logs on fail
    #   # if: ${{ failure() }}
    #   uses: actions/upload-artifact@v3
    #   with:
    #     name: Build failure logs
    #     path: ${{ runner.temp }}/build_logs